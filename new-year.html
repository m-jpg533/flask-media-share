<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Colorful Fireworks</title>

<style>
body{
  margin:0;
  background:black;
  overflow:hidden;
  touch-action:none;
}

canvas{
  position:absolute;
  z-index:1;
}

/* æ°¸é åœ¨æœ€ä¸Šå±¤ */
#text{
  position:fixed;
  width:100%;
  top:40%;
  text-align:center;
  font-size:48px;
  color:gold;
  font-weight:bold;
  z-index:10;
  animation: glow 1s infinite alternate;
}

@keyframes glow{
  from{ text-shadow:0 0 10px gold; }
  to{ text-shadow:0 0 30px yellow; }
}

/* éŸ³æ¨‚æŒ‰éˆ• */
#musicBtn{
  position:fixed;
  bottom:20px;
  right:20px;
  z-index:20;
  padding:10px 15px;
  font-size:16px;
  border:none;
  border-radius:8px;
}
</style>
</head>

<body>

<div id="text">ğŸ† å…ƒå®µå¿«æ¨‚ ğŸ†</div>
<button id="musicBtn">ğŸ”Š éŸ³æ¨‚</button>

<canvas id="fire"></canvas>

<!-- èƒŒæ™¯éŸ³æ¨‚ï¼ˆå¯æ›¿æ› mp3 é€£çµï¼‰ -->
<audio id="bgm" loop>
  <source src="https://m-jpg533.github.io/flask-media-share/82.mp3" type="audio/mpeg">
</audio>

<script>
const canvas = document.getElementById("fire");
const ctx = canvas.getContext("2d");
const bgm = document.getElementById("bgm");
const musicBtn = document.getElementById("musicBtn");

function resize(){
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
}
resize();
window.addEventListener("resize", resize);

let particles = [];

// å»ºç«‹å½©è‰²ç…™ç«
function createFirework(){
  let x = Math.random() * canvas.width;
  let y = Math.random() * canvas.height / 2;
  let color = `hsl(${Math.random()*360},100%,50%)`;

  for(let i=0;i<70;i++){
    particles.push({
      x, y,
      vx:(Math.random()-0.5)*6,
      vy:(Math.random()-0.5)*6,
      life:100,
      color
    });
  }
}

function draw(){
  ctx.fillStyle = "rgba(0,0,0,0.2)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  particles.forEach((p,i)=>{
    ctx.beginPath();
    ctx.arc(p.x,p.y,2,0,Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();

    p.x += p.vx;
    p.y += p.vy;
    p.life--;

    if(p.life<=0) particles.splice(i,1);
  });

  requestAnimationFrame(draw);
}

setInterval(createFirework, 800);
draw();

// é»æ“Šæˆ–è§¸æ§æ”¾ç…™ç« + æ’­éŸ³æ¨‚ï¼ˆæ‰‹æ©Ÿéœ€äº’å‹•æ‰å¯æ’­ï¼‰
function userFire(){
  createFirework();
  bgm.play().catch(()=>{});
}
canvas.addEventListener("click", userFire);
canvas.addEventListener("touchstart", userFire);

// éŸ³æ¨‚é–‹é—œ
musicBtn.onclick = ()=>{
  if(bgm.paused){
    bgm.play();
    musicBtn.textContent = "ğŸ”Š éŸ³æ¨‚";
  }else{
    bgm.pause();
    musicBtn.textContent = "ğŸ”‡ éœéŸ³";
  }
};
</script>

</body>
</html>


